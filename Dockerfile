FROM node:11-alpine

WORKDIR /app

COPY package.json /app
COPY yarn.lock /app

RUN yarn

COPY . /app

EXPOSE 8000

ARG EMAIL
ARG YEAR
ARG SHEET_ID
ARG RECAPTCHA_SECRET

ENV EMAIL=$EMAIL
ENV YEAR=$YEAR
ENV SHEET_ID=$SHEET_ID
ENV RECAPTCHA_SECRET=$RECAPTCHA_SECRET

CMD ["yarn", "start"]
